
<template>
  <header class="u-clearfix u-header u-header" id="sec-ab8a"><div class="u-clearfix u-sheet u-sheet-1">
        <form action="#" method="get" class="u-border-1 u-border-custom-color-3 u-custom-color-4 u-radius-8 u-search u-search-left u-search-1">
          <button class="u-search-button" type="submit">
            <span class="u-search-icon u-spacing-10 u-text-custom-color-3">
              <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 56.966 56.966"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-eccb"></use></svg>
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg-eccb" x="0px" y="0px" viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" class="u-svg-content"><path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"></path></svg>
            </span>
          </button>
          <input class="u-search-input" type="search" name="search" value="" placeholder="Search">
        </form>
        <a class="u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-custom-color-4 u-hover-palette-4-base u-radius-8 u-btn-1"><span class="u-file-icon u-icon u-text-grey-60 u-icon-1"><img src="images/bell.png" alt=""></span>
        </a>	
		<div class="dropdown" style="position: absolute; left: 95.5%;">
		<div>
        <a class="u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-custom-color-4 u-hover-palette-4-base u-radius-8 u-btn-2">
		<span class="u-file-icon u-icon u-text-grey-60 u-icon-2">
		<img src="images/hamburger.png" alt="">	
		</span>
        </a>
		</div>
		<div class="dropdown-content">
		<a class="dropdown-item" href="#">Home</a>  
		<a class="dropdown-item" href="#">Notifications</a>  
		<a class="dropdown-item" href="#">Setting</a>  
		</div>		
		</div>
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
          <div class="menu-collapse">
            <a class="u-button-style u-nav-link" href="#">
              <svg class="u-svg-link" viewBox="0 0 24 24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-f8b0"></use></svg>
              <svg class="u-svg-content" version="1.1" id="svg-f8b0" viewBox="0 0 16 16" x="0px" y="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</g></svg>
            </a>
          </div>
          <div class="u-nav-container"></div>
          <div class="u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Kryptowaluty.html">Kryptowaluty</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
        <div class="u-container-style u-custom-color-4 u-group u-radius-16 u-shape-round u-group-1">
          <div class="u-container-layout u-container-layout-1">
            <a class="u-border-2 u-border-grey-75 u-btn u-button-style u-custom-color-4 u-hover-palette-4-base u-btn-3"><span class="u-file-icon u-icon u-text-custom-color-3 u-icon-3"><img src="images/ellipsis.png" alt=""></span>
            </a>
            <h5 class="u-text u-text-default u-text-1">Current Balance</h5>
            <h1 class="u-text u-text-default u-text-2">
              <span class="u-text-custom-color-3">$</span>21 432.23
            </h1>
            <h5 class="u-text u-text-custom-color-2 u-text-default u-text-3">12% vs last month</h5><span class="u-file-icon u-icon u-text-custom-color-2 u-icon-4"><img src="images/green_arrow.png" alt=""></span>
            <a class="u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-hover-palette-1-light-1 u-radius-6 u-text-custom-color-1 u-text-hover-custom-color-1 u-white u-btn-4">Show Report</a>
            <a class="u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-custom-color-1 u-hover-palette-1-light-1 u-radius-6 u-btn-5">Quick Invest</a>
          </div>
        </div>
        <div class="u-clearfix u-layout-wrap u-layout-wrap-1">
          <div class="u-layout">
            <div class="u-layout-row">
              <div class="u-container-style u-custom-color-4 u-layout-cell u-radius-16 u-shape-round u-size-60 u-layout-cell-1">
                <div class="u-container-layout u-container-layout-2">
                  <a class="u-border-2 u-border-grey-75 u-btn u-button-style u-custom-color-4 u-hover-palette-4-base u-btn-6"><span class="u-file-icon u-icon u-text-custom-color-3 u-icon-5"><img src="images/ellipsis.png" alt=""></span>
                  </a>
                  <h5 class="u-text u-text-default u-text-4">Summary</h5>
                  <div style="height: 10px">
                  </div>
                  <img src="images/chart.png" alt=""  width="100%" height="85%">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="u-expanded-width u-tabs u-tabs-1">
          <ul class="u-border-6 u-border-grey-15 u-custom-color-4 u-tab-list u-unstyled u-tab-list-1" role="tablist">
            <li class="u-tab-item" role="presentation">
              <a class="active u-active-custom-color-4 u-border-5 u-border-active-custom-color-1 u-border-custom-color-4 u-border-hover-custom-color-4 u-border-no-left u-border-no-right u-border-no-top u-button-style u-custom-color-4 u-tab-link u-tab-link-1" id="link-tab-23b8" href="#tab-23b8" role="tab" aria-controls="tab-23b8" aria-selected="true">Summary</a>
            </li>
            <li class="u-tab-item" role="presentation">
              <a class="u-active-custom-color-4 u-border-5 u-border-active-custom-color-1 u-border-custom-color-4 u-border-hover-custom-color-4 u-border-no-left u-border-no-right u-border-no-top u-button-style u-custom-color-4 u-tab-link u-tab-link-2" id="link-tab-40a7" href="#tab-40a7" role="tab" aria-controls="tab-40a7" aria-selected="false">Table</a>
            </li>
            <li class="u-tab-item" role="presentation">
              <a class="u-active-custom-color-4 u-border-5 u-border-active-custom-color-1 u-border-custom-color-4 u-border-hover-custom-color-4 u-border-no-left u-border-no-right u-border-no-top u-button-style u-custom-color-4 u-tab-link u-tab-link-3" id="link-tab-ec1b" href="#tab-ec1b" role="tab" aria-controls="tab-ec1b" aria-selected="false">Charts</a>
            </li>
            <li class="u-tab-item" role="presentation">
              <a class="u-active-custom-color-4 u-border-5 u-border-active-custom-color-1 u-border-custom-color-4 u-border-hover-custom-color-4 u-border-no-left u-border-no-right u-border-no-top u-button-style u-custom-color-4 u-tab-link u-tab-link-4" id="link-tab-036b" href="#tab-036b" role="tab" aria-controls="tab-036b" aria-selected="false">Reporting</a>
            </li>
            <li class="u-tab-item" role="presentation">
              <a class="u-active-custom-color-4 u-border-5 u-border-active-custom-color-1 u-border-custom-color-4 u-border-hover-custom-color-4 u-border-no-left u-border-no-right u-border-no-top u-button-style u-custom-color-4 u-tab-link u-tab-link-5" id="link-tab-a701" href="#tab-a701" role="tab" aria-controls="tab-a701" aria-selected="false">Analysis</a>
            </li>
          </ul>
          <div class="u-tab-content">
            <div class="u-container-style u-custom-color-4 u-tab-active u-tab-pane u-tab-pane-1" id="tab-23b8" role="tabpanel" aria-labelledby="link-tab-23b8">
              <div class="u-container-layout u-valign-top u-container-layout-3">
				<ul>
				<span v-for="(value, index) in array_name" v-bind:key="value.id">
                <div class="u-border-1 u-border-grey-15 u-container-style u-group u-radius-16 u-shape-round u-white u-group-2">
                  <div class="u-container-layout u-container-layout-4">
                    <p class="u-text u-text-custom-color-3 u-text-default u-text-5">Change</p>
                    <p class="u-text u-text-custom-color-3 u-text-default u-text-6">{{ array_symbol[index] }}</p>
                    <p class="u-text u-text-custom-color-3 u-text-default u-text-7">Price</p>
                    <a class="u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-custom-color-1 u-hover-palette-1-light-1 u-radius-6 u-btn-7">Buy<br>
                    </a>
                    <a class="u-border-2 u-border-grey-75 u-btn u-btn-round u-button-style u-hover-palette-1-light-1 u-radius-6 u-text-custom-color-1 u-text-hover-custom-color-1 u-white u-btn-8">Sell</a>
                    <p class="u-text u-text-default u-text-8">{{ value }}</p>
                    <p class="u-text u-text-default u-text-9">${{ array_price[index] }}</p>
					
                    <p v-if="greenorred[index]==1" class="u-text u-text-custom-color-2 u-text-10">{{ array_change1plus[index] }}%</p>
					
					<p v-else class="u-text u-text-custom-color-red u-text-10">{{ array_change1plus[index] }}%</p>
					
					<div class="chart123">
						<SimpleBaselineChart :series="series[index]" :baseValue="baseValue" :options="options[index]" />
					</div>
					
                    <span v-if="greenorred[index]==1" class="u-file-icon u-icon u-text-custom-color-2 u-icon-6"><img src="images/green_arrow.png" alt=""></span>
					<span v-else class="u-file-icon u-icon u-text-custom-color-2 u-icon-6"><img src="images/red_arrow.png" alt=""></span>
                  </div>
                </div>
				
				<div style="height: 10px">
				</div>
				
				</span>
				</ul>
              </div>
            </div>
            <div class="u-container-style u-custom-color-4 u-tab-pane u-tab-pane-2" id="tab-40a7" role="tabpanel" aria-labelledby="link-tab-40a7">
              <div class="u-container-layout u-container-layout-5"></div>
            </div>
            <div class="u-container-style u-custom-color-4 u-tab-pane u-tab-pane-3" id="tab-ec1b" role="tabpanel" aria-labelledby="link-tab-ec1b">
              <div class="u-container-layout u-container-layout-6"></div>
            </div>
            <div class="u-container-style u-custom-color-4 u-tab-pane u-tab-pane-4" id="tab-036b" role="tabpanel" aria-labelledby="link-tab-036b">
              <div class="u-container-layout u-container-layout-7"></div>
            </div>
            <div class="u-container-style u-custom-color-4 u-tab-pane u-tab-pane-5" id="tab-a701" role="tabpanel" aria-labelledby="link-tab-a701">
              <div class="u-container-layout u-container-layout-8"></div>
            </div>						
          </div>
        </div>
      </div></header> 
    
</template>

<script>
import SimpleBaselineChart from 'vue-sbchart';
				
const api_url = 'http://localhost:8080/v1/cryptocurrency/listings/latest';
const apiKey = 'cdf67d32-041a-458b-827b-f3115edb2508';
const params = {
	'method': 'GET',
	'headers': {'X-CMC_PRO_API_KEY': apiKey, 'Accept': 'application/json'},
	'muteHttpExceptions': true
};
const response = await fetch(api_url, params);
const data1 = await response.json();
const keyCount  = Object.keys(data1.data).length;
const array_symbol = [];
const array_price = [];
const array_change1 = [];
const array_change1plus = [];
const array_change7 = [];
const array_change30 = [];
const array_change60 = [];
const array_change90 = [];
const greenorred = [];
const array_name = [];

for (let i = 0; i < keyCount; i++) {

	array_name.push(data1.data[i].name);
	array_symbol.push(data1.data[i].symbol);
	array_price.push( Math.round(data1.data[i].quote.USD.price * 100)/100 );
	//array_price.push(data1.data[i].quote.USD.price);
	data1.data[i].quote.USD.percent_change_24h = Math.round(data1.data[i].quote.USD.percent_change_24h * 100)/100;
	
	array_change1.push(data1.data[i].quote.USD.percent_change_24h);
	let first = data1.data[i].quote.USD.percent_change_24h;
	first = first.toString().slice(0, 1);
	if(first!='-')
	{
		data1.data[i].quote.USD.percent_change_24h = '+' + data1.data[i].quote.USD.percent_change_24h;
		greenorred.push(1);
	}
	else
	{
		data1.data[i].quote.USD.percent_change_24h = data1.data[i].quote.USD.percent_change_24h.toString().replace(/-/g, '–');
		greenorred.push(0);
	}
	array_change1plus.push(data1.data[i].quote.USD.percent_change_24h);
	array_change7.push(data1.data[i].quote.USD.percent_change_7d);
	array_change30.push(data1.data[i].quote.USD.percent_change_30d);
	array_change60.push(data1.data[i].quote.USD.percent_change_60d);
	array_change90.push(data1.data[i].quote.USD.percent_change_90d);
	}

const series1 = [];
for (let i = 0; i < 100; i++) {
	series1[i] = [
	{ timestamp: 1656818225, value: array_change1[i] },
	{ timestamp: 1656818226, value: array_change7[i] },
	{ timestamp: 1656818227, value: array_change30[i] },
	{ timestamp: 1656818228, value: array_change60[i] },
	{ timestamp: 1656818228, value: array_change90[i] },
	];
}

const options1 = [];
for (let i = 0; i < 100; i++) {
	if(greenorred[i]==1)
	{
		options1[i] = {
			upColor: '#37eb34',
		downColor: '#37eb34',
		lineWidth: 1
		};
	}
	else
	{
		options1[i] = {
			upColor: '#eb3434',
		downColor: '#eb3434',
		lineWidth: 1
		};
	}
}

export default {

	components: { SimpleBaselineChart },
	setup(props) {
		let series = series1;
		const baseValue = -150;
		let options = options1;
		console.log(props);
		return { series, baseValue, options};
	},

	data(){
		return {
			array_name: array_name,
			array_symbol: array_symbol,
			array_price: array_price,
			array_change1: array_change1,
			array_change1plus: array_change1plus,
			array_change7: array_change7,
			array_change30: array_change30,
			array_change60: array_change60,
			array_change90: array_change90,
			greenorred: greenorred,
		}
	}
}

</script>
